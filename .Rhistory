legend(x = 1985, y = 3000, legend=c("Cumulative", "Per year"),
cex = 0.7, col = c("gray", "black"), lty = "solid",
pch = c(16, NA_integer_), lwd = 2, bty = "n")
pdf(file = "~/Google Drive/datelife/timeTreeOfLife/Kumar_2017_study_growth.pdf",
height = 4,
width = 8)
plot(table$Year, rank(table$Year),
xlab = "", ylab = "", col = "white",
xaxt = "n", yaxt = "n")
abline(h = seq(500, 3000, 500), col = "gray95")
points(table$Year, rank(table$Year), pch = 16, col = "gray",
type = "o", cex = 0.8, lwd = 2)
points(table(table$Year), lwd = 2)
axis(side = 1, cex.axis = 0.6, las = 2)
mtext(side = 1, "Year", line = 3)
axis(side = 2, cex.axis = 0.6, las = 1)
mtext(side = 2, "Number of studies", line = 3)
legend(x = 1985, y = 3000, legend=c("Cumulative", "Per year"),
cex = 0.7, col = c("gray", "black"), lty = "solid",
pch = c(16, NA_integer_), lwd = 2, bty = "n")
dev.off()
pdf(file = "~/Google Drive/datelife/timeTreeOfLife/Kumar_2017_study_growth.pdf",
height = 4,
width = 6)
plot(table$Year, rank(table$Year),
xlab = "", ylab = "", col = "white",
xaxt = "n", yaxt = "n".
title = "TimeTree of Life studies from Kumar et al. 2017")
abline(h = seq(500, 3000, 500), col = "gray95")
points(table$Year, rank(table$Year), pch = 16, col = "gray",
type = "o", cex = 0.8, lwd = 2)
points(table(table$Year), lwd = 2)
axis(side = 1, cex.axis = 0.6, las = 2)
mtext(side = 1, "Year", line = 3)
axis(side = 2, cex.axis = 0.6, las = 1)
mtext(side = 2, "Number of studies", line = 3)
legend(x = 1985, y = 3000, legend=c("Cumulative", "Per year"),
cex = 0.7, col = c("gray", "black"), lty = "solid",
pch = c(16, NA_integer_), lwd = 2, bty = "n")
dev.off()
pdf(file = "~/Google Drive/datelife/timeTreeOfLife/Kumar_2017_study_growth.pdf",
height = 4,
width = 6)
plot(table$Year, rank(table$Year),
xlab = "", ylab = "", col = "white",
xaxt = "n", yaxt = "n",
title = "TimeTree of Life studies from Kumar et al. 2017")
abline(h = seq(500, 3000, 500), col = "gray95")
points(table$Year, rank(table$Year), pch = 16, col = "gray",
type = "o", cex = 0.8, lwd = 2)
points(table(table$Year), lwd = 2)
axis(side = 1, cex.axis = 0.6, las = 2)
mtext(side = 1, "Year", line = 3)
axis(side = 2, cex.axis = 0.6, las = 1)
mtext(side = 2, "Number of studies", line = 3)
legend(x = 1985, y = 3000, legend=c("Cumulative", "Per year"),
cex = 0.7, col = c("gray", "black"), lty = "solid",
pch = c(16, NA_integer_), lwd = 2, bty = "n")
dev.off()
plot(table$Year, rank(table$Year),
xlab = "", ylab = "", col = "white",
xaxt = "n", yaxt = "n",
main = "TimeTree of Life studies from Kumar et al. 2017")
plot(table$Year, rank(table$Year),
xlab = "", ylab = "", col = "white",
xaxt = "n", yaxt = "n",
main = "TimeTree of Life studies from Kumar et al. 2017".cex = 0.7)
plot(table$Year, rank(table$Year),
xlab = "", ylab = "", col = "white",
xaxt = "n", yaxt = "n",
main = "TimeTree of Life studies from Kumar et al. 2017", cex = 0.7)
mtext(side = 3,
main = "TimeTree of Life studies from Kumar et al. 2017",
cex = 0.7)
mtext(side = 3,
text = "TimeTree of Life studies from Kumar et al. 2017",
cex = 0.7)
mtext(side = 3, line = 3
text = "TimeTree of Life studies from Kumar et al. 2017",
cex = 0.8)
mtext(side = 3, line = 3,
text = "TimeTree of Life studies from Kumar et al. 2017",
cex = 0.8)
pdf(file = "~/Google Drive/datelife/timeTreeOfLife/Kumar_2017_study_growth.pdf",
height = 4,
width = 6)
plot(table$Year, rank(table$Year),
xlab = "", ylab = "", col = "white",
xaxt = "n", yaxt = "n")
mtext(side = 3, line = 2,
text = "TimeTree of Life studies from Kumar et al. 2017",
cex = 0.8)
abline(h = seq(500, 3000, 500), col = "gray95")
points(table$Year, rank(table$Year), pch = 16, col = "gray",
type = "o", cex = 0.8, lwd = 2)
points(table(table$Year), lwd = 2)
axis(side = 1, cex.axis = 0.6, las = 2)
mtext(side = 1, "Year", line = 3)
axis(side = 2, cex.axis = 0.6, las = 1)
mtext(side = 2, "Number of studies", line = 3)
legend(x = 1985, y = 3000, legend=c("Cumulative", "Per year"),
cex = 0.7, col = c("gray", "black"), lty = "solid",
pch = c(16, NA_integer_), lwd = 2, bty = "n")
dev.off()
# try with ggplot:
x <- make_datelife_query(c("Rhea americana", "Pterocnemia pennata", "Struthio camelus"))
datelife_result(x)
datelife_search(x)
x
?datelife_search
get_datelife_result(x)
xgdr <- get_datelife_result(x)
xgdr[1]
xgdr[1]
xgdr[[1]]
xgdr[[2]]
xgdr[[3]]
x <- make_datelife_query("felidae", get_spp_from_taxon = T)
x
?tree_add_dates
y <- tree_add_dates(felid_sdm$phy, missing_taxa = x$cleaned_names)
expression(Agavoideae ~ italic(sensu ~ stricto))
paste("1 shift in ", c(cladeA_name, cladeA1_name, cladeA2_name, cladeB_name, cladeB1_name, cladeB2_name))
cladeA_name <- expression(italic(Agave~s.l.) * plain("+") * italic(Furcraea-Beschorneria))
cladeA1_name <- expression(italic(Agave~s.l.))
cladeA2_name <- expression(italic(Furcraea)*"/"*italic(Beschorneria))
cladeB_name <- expression(italic(Yuca) * plain("+") * italic(Hesperoyucca)*"/"*italic(Hesperaloe))
cladeB1_name <- expression(italic(Yuca))
cladeB2_name <- expression(italic(Hesperoyucca)*"/"*italic(Hesperaloe))
paste("1 shift in ", c(cladeA_name, cladeA1_name, cladeA2_name, cladeB_name, cladeB1_name, cladeB2_name))
paste0("1 shift in ", c(cladeA_name, cladeA1_name, cladeA2_name, cladeB_name, cladeB1_name, cladeB2_name))
("1 shift in ", c(cladeA_name, cladeA1_name, cladeA2_name, cladeB_name, cladeB1_name, cladeB2_name))
c("1 shift in ", c(cladeA_name, cladeA1_name, cladeA2_name, cladeB_name, cladeB1_name, cladeB2_name))
c("1 shift in ", c(cladeA_name, cladeA1_name, cladeA2_name, cladeB_name, cladeB1_name, cladeB2_name), recursive = TRUE)
cbind("1 shift in ", c(cladeA_name, cladeA1_name, cladeA2_name, cladeB_name, cladeB1_name, cladeB2_name))
cbind("1 shift in ", list(cladeA_name, cladeA1_name, cladeA2_name, cladeB_name, cladeB1_name, cladeB2_name))
x1 <- read.tree("(((((((((((((((((((((((((((((ott267845:9.49775)ott496027:25.5830937415)mrcaott1566ott496009:1.46054421769)mrcaott1566ott2175:1.46054421769)mrcaott1566ott5934:1.46054421769)mrcaott246ott1566:1.7502437415)mrcaott246ott3364:0.786490952381)mrcaott246ott1488:1.07619047619)mrcaott246ott10351:1.07619047619)mrcaott246ott193904:1.07619047619)mrcaott246ott4820:0)mrcaott246ott191995:0.56208)mrcaott246ott32658:1.04)mrcaott246ott5929:28.5786558491)mrcaott246ott44866:1.63773584906)mrcaott246ott428578:1.63773584906)mrcaott246ott3212:1.63773584906)ott1041547:1.63773584906)mrcaott246ott7113:1.63773584906)mrcaott246ott47588:1.63773584906)mrcaott246ott3600042:1.63773584906)mrcaott246ott2907:0)mrcaott246ott1858:0)mrcaott246ott928360:0)mrcaott246ott5272:0)mrcaott246ott7145:0)mrcaott246ott5021:0.0322832973806)mrcaott246ott5481:243.448177534,(((((((((((((ott102710:13.097330757567)mrcaott53700ott466627:0.795214545455)mrcaott53700ott572162:6.70985857143)mrcaott4765ott53700:1.71681857143)mrcaott4765ott51354:1.71681857143)mrcaott4765ott415487:7.27728411765)mrcaott4765ott49310:2.08732411765)mrcaott4765ott49319:2.08732411765)mrcaott4765ott54193:12.7158483333)mrcaott4765ott151684:0.000142631578953)mrcaott4765ott104461:25.2011005)mrcaott4765ott75785:0.000608571428572)ott837585:10.3037359091,((((((ott316878:37.0714367252)mrcaott166683ott316879:4.63392959064)mrcaott30843ott166683:2.45325684211)mrcaott30843ott75874:2.45325684211)ott765193:27.3580225)mrcaott30843ott714464:9.7302647619)ott241841:0.0000459090909004)ott5839486:246.536935742)ott241846:5.49770753425,(((ott292466:53.700006)ott857849:17.900002)ott857847:17.900002)ott81443:246.233424715)ott81461;")
x1 <- read.newick("(((((((((((((((((((((((((((((ott267845:9.49775)ott496027:25.5830937415)mrcaott1566ott496009:1.46054421769)mrcaott1566ott2175:1.46054421769)mrcaott1566ott5934:1.46054421769)mrcaott246ott1566:1.7502437415)mrcaott246ott3364:0.786490952381)mrcaott246ott1488:1.07619047619)mrcaott246ott10351:1.07619047619)mrcaott246ott193904:1.07619047619)mrcaott246ott4820:0)mrcaott246ott191995:0.56208)mrcaott246ott32658:1.04)mrcaott246ott5929:28.5786558491)mrcaott246ott44866:1.63773584906)mrcaott246ott428578:1.63773584906)mrcaott246ott3212:1.63773584906)ott1041547:1.63773584906)mrcaott246ott7113:1.63773584906)mrcaott246ott47588:1.63773584906)mrcaott246ott3600042:1.63773584906)mrcaott246ott2907:0)mrcaott246ott1858:0)mrcaott246ott928360:0)mrcaott246ott5272:0)mrcaott246ott7145:0)mrcaott246ott5021:0.0322832973806)mrcaott246ott5481:243.448177534,(((((((((((((ott102710:13.097330757567)mrcaott53700ott466627:0.795214545455)mrcaott53700ott572162:6.70985857143)mrcaott4765ott53700:1.71681857143)mrcaott4765ott51354:1.71681857143)mrcaott4765ott415487:7.27728411765)mrcaott4765ott49310:2.08732411765)mrcaott4765ott49319:2.08732411765)mrcaott4765ott54193:12.7158483333)mrcaott4765ott151684:0.000142631578953)mrcaott4765ott104461:25.2011005)mrcaott4765ott75785:0.000608571428572)ott837585:10.3037359091,((((((ott316878:37.0714367252)mrcaott166683ott316879:4.63392959064)mrcaott30843ott166683:2.45325684211)mrcaott30843ott75874:2.45325684211)ott765193:27.3580225)mrcaott30843ott714464:9.7302647619)ott241841:0.0000459090909004)ott5839486:246.536935742)ott241846:5.49770753425,(((ott292466:53.700006)ott857849:17.900002)ott857847:17.900002)ott81443:246.233424715)ott81461;")
x1 <- read.newick(text = "(((((((((((((((((((((((((((((ott267845:9.49775)ott496027:25.5830937415)mrcaott1566ott496009:1.46054421769)mrcaott1566ott2175:1.46054421769)mrcaott1566ott5934:1.46054421769)mrcaott246ott1566:1.7502437415)mrcaott246ott3364:0.786490952381)mrcaott246ott1488:1.07619047619)mrcaott246ott10351:1.07619047619)mrcaott246ott193904:1.07619047619)mrcaott246ott4820:0)mrcaott246ott191995:0.56208)mrcaott246ott32658:1.04)mrcaott246ott5929:28.5786558491)mrcaott246ott44866:1.63773584906)mrcaott246ott428578:1.63773584906)mrcaott246ott3212:1.63773584906)ott1041547:1.63773584906)mrcaott246ott7113:1.63773584906)mrcaott246ott47588:1.63773584906)mrcaott246ott3600042:1.63773584906)mrcaott246ott2907:0)mrcaott246ott1858:0)mrcaott246ott928360:0)mrcaott246ott5272:0)mrcaott246ott7145:0)mrcaott246ott5021:0.0322832973806)mrcaott246ott5481:243.448177534,(((((((((((((ott102710:13.097330757567)mrcaott53700ott466627:0.795214545455)mrcaott53700ott572162:6.70985857143)mrcaott4765ott53700:1.71681857143)mrcaott4765ott51354:1.71681857143)mrcaott4765ott415487:7.27728411765)mrcaott4765ott49310:2.08732411765)mrcaott4765ott49319:2.08732411765)mrcaott4765ott54193:12.7158483333)mrcaott4765ott151684:0.000142631578953)mrcaott4765ott104461:25.2011005)mrcaott4765ott75785:0.000608571428572)ott837585:10.3037359091,((((((ott316878:37.0714367252)mrcaott166683ott316879:4.63392959064)mrcaott30843ott166683:2.45325684211)mrcaott30843ott75874:2.45325684211)ott765193:27.3580225)mrcaott30843ott714464:9.7302647619)ott241841:0.0000459090909004)ott5839486:246.536935742)ott241846:5.49770753425,(((ott292466:53.700006)ott857849:17.900002)ott857847:17.900002)ott81443:246.233424715)ott81461;")
x1 <- read.tree(text = "(((((((((((((((((((((((((((((ott267845:9.49775)ott496027:25.5830937415)mrcaott1566ott496009:1.46054421769)mrcaott1566ott2175:1.46054421769)mrcaott1566ott5934:1.46054421769)mrcaott246ott1566:1.7502437415)mrcaott246ott3364:0.786490952381)mrcaott246ott1488:1.07619047619)mrcaott246ott10351:1.07619047619)mrcaott246ott193904:1.07619047619)mrcaott246ott4820:0)mrcaott246ott191995:0.56208)mrcaott246ott32658:1.04)mrcaott246ott5929:28.5786558491)mrcaott246ott44866:1.63773584906)mrcaott246ott428578:1.63773584906)mrcaott246ott3212:1.63773584906)ott1041547:1.63773584906)mrcaott246ott7113:1.63773584906)mrcaott246ott47588:1.63773584906)mrcaott246ott3600042:1.63773584906)mrcaott246ott2907:0)mrcaott246ott1858:0)mrcaott246ott928360:0)mrcaott246ott5272:0)mrcaott246ott7145:0)mrcaott246ott5021:0.0322832973806)mrcaott246ott5481:243.448177534,(((((((((((((ott102710:13.097330757567)mrcaott53700ott466627:0.795214545455)mrcaott53700ott572162:6.70985857143)mrcaott4765ott53700:1.71681857143)mrcaott4765ott51354:1.71681857143)mrcaott4765ott415487:7.27728411765)mrcaott4765ott49310:2.08732411765)mrcaott4765ott49319:2.08732411765)mrcaott4765ott54193:12.7158483333)mrcaott4765ott151684:0.000142631578953)mrcaott4765ott104461:25.2011005)mrcaott4765ott75785:0.000608571428572)ott837585:10.3037359091,((((((ott316878:37.0714367252)mrcaott166683ott316879:4.63392959064)mrcaott30843ott166683:2.45325684211)mrcaott30843ott75874:2.45325684211)ott765193:27.3580225)mrcaott30843ott714464:9.7302647619)ott241841:0.0000459090909004)ott5839486:246.536935742)ott241846:5.49770753425,(((ott292466:53.700006)ott857849:17.900002)ott857847:17.900002)ott81443:246.233424715)ott81461;")
plot(x1)
axisPhylo()
x2 <- read.tree(text = "(((((((((((((((((((((((((((((Cinclus:9.49775)Cinclidae:25.5830937415)mrcaott1566ott496009:1.46054421769)mrcaott1566ott2175:1.46054421769)mrcaott1566ott5934:1.46054421769)mrcaott246ott1566:1.7502437415)mrcaott246ott3364:0.786490952381)mrcaott246ott1488:1.07619047619)mrcaott246ott10351:1.07619047619)mrcaott246ott193904:1.07619047619)mrcaott246ott4820:0)mrcaott246ott191995:0.56208)mrcaott246ott32658:1.04)mrcaott246ott5929:28.5786558491)mrcaott246ott44866:1.63773584906)mrcaott246ott428578:1.63773584906)mrcaott246ott3212:1.63773584906)Passeriformes:1.63773584906)mrcaott246ott7113:1.63773584906)mrcaott246ott47588:1.63773584906)mrcaott246ott3600042:1.63773584906)mrcaott246ott2907:0)mrcaott246ott1858:0)mrcaott246ott928360:0)mrcaott246ott5272:0)mrcaott246ott7145:0)mrcaott246ott5021:0.0322832973806)mrcaott246ott5481:243.448177534,(((((((((((((Perdix:13.097330757567)mrcaott53700ott466627:0.795214545455)mrcaott53700ott572162:6.70985857143)mrcaott4765ott53700:1.71681857143)mrcaott4765ott51354:1.71681857143)mrcaott4765ott415487:7.27728411765)mrcaott4765ott49310:2.08732411765)mrcaott4765ott49319:2.08732411765)mrcaott4765ott54193:12.7158483333)mrcaott4765ott151684:0.000142631578953)mrcaott4765ott104461:25.2011005)mrcaott4765ott75785:0.000608571428572)Galliformes:10.3037359091,((((((Clangula:37.0714367252)mrcaott166683ott316879:4.63392959064)mrcaott30843ott166683:2.45325684211)mrcaott30843ott75874:2.45325684211)Anatidae:27.3580225)mrcaott30843ott714464:9.7302647619)Anseriformes:0.0000459090909004)Galloanserae:246.536935742)Neognathae:5.49770753425,(((Struthio:53.700006)Struthionidae:17.900002)Struthioniformes:17.900002)Palaeognathae:246.233424715)Aves;")
plot(x2)
axisPhylo()
fig_workflow_main <- "Fig. 1"
fig_runtime_main <- "Fig. 2"
# make_datelife_query_plus_get_datelife_result
citation(package = 'bold')
citation(package = 'phylocomr')
install.packages("phylocomr")
citation(package = 'phylocomr')
citation(package = 'rphylotastic')
?download.file
source("Datelife_paper1_global.R")
download.file(url = "https://github.com/phylotastic/datelife/blob/master/data-raw/benchmark/runtime_tests/2_tests/2_random_spp_names/mdq_plus_gdr_2018.05.29_fill.pdf", destfile = "fig_runtime_main.pdf", method="internal")
download.file(url = "https://github.com/phylotastic/datelife/blob/master/data-raw/benchmark/runtime_tests/2_tests/2_random_spp_names/mdq_plus_gdr_2018.05.29_fill.pdf", destfile = "fig_runtime_main.pdf", method="libcurl")
download.file(url = "https://github.com/phylotastic/datelife/raw/master/data-raw/benchmark/runtime_tests/2_tests/2_random_spp_names/mdq_plus_gdr_2018.05.29_fill.pdf", destfile = "fig_runtime_main.pdf", mode="wb")
install.packages("bookdown")
install.packages("bookdown")
knit_with_parameters('~/Desktop/datelife_paper1/Datelife_paper1.Rmd')
source("frin_plan.R")
source("frin_plan.R")
unlink(".RData")
source("frin_plan.R")
loadd()
source("frin_plan.R")
loadd() # loads all the targets listed in the workflow plan of the previous `make()`
clean(destroy = TRUE)
source("frin_plan.R")
loadd() # loads all the targets listed in the workflow plan of the previous `make()`
str(dq)
length(dr)
unique(names(dr))
seq(unique(names(dr)))
paste(seq(unique(names(dr))), ") [@], ")
paste(seq(unique(names(dr))), ") [@], ", collapse = "")
paste0(seq(unique(names(dr))), ") [@], ")
paste0(seq(unique(names(dr))), ") [@", c("barker2012going",
"barker2015new",
"burns2014phylogenetics",
"claramunt2015new",
"gibb2015new",
"Hedges2015",
"hooper2017chromosomal",
"Jetz2012",
"price2014niche"), "], ")
paste0(seq(unique(names(dr))), ") [@", c("barker2012going",
"barker2015new",
"burns2014phylogenetics",
"claramunt2015new",
"gibb2015new",
"Hedges2015",
"hooper2017chromosomal",
"Jetz2012",
"price2014niche"), "]")
remove.packages
remove.packages("datelife")
install("~/Desktop/datelife")
devtools::install("~/Desktop/datelife")
loadd(phyloall)
library(drake)
loadd(phyloall)
length(phyloall_)
length(phyloall)
names(phyloall)
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
loadd(bestgrove)
length(bestgrove)
names(bestgrove)
loadd(phy_sdm)
class(phy_sdm)
diagnose(ltt_summ)
loadd(phyloall)
loadd(phy_median)
phy_median
names(phy_median)
class(phy_median)
phy_median[[1]]
class(phy_median[[1]])
names(phy_median[[1]])
plot(phy_median[[1]])
plot.phylo(phy_median[[1]])
ape::plot.phylo(phy_median[[1]])
plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE)
library(datelife)
plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE)
traceback()
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE)
traceback()
trees=phyloall
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE)
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE)
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
devtools::install("~/Desktop/datelife")
plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE)
library(datelife)
plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE)
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE)
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE)
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE)
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE)
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE)
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE)
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = FALSE)
remove.packages("datelife")
devtools::install("~/Desktop/datelife")
loadd(otol)
otol
otol = get_otol_synthetic_tree(input = dq)
dq = make_datelife_query(input = "fringillidae", get_spp_from_taxon = TRUE)
otol = get_otol_synthetic_tree(input = dq)
sim_otol = use_each_calibration(phy = otol, calibrations = each_calibrations)$phy
loadd(each_calibrations)
sim_otol = use_each_calibration(phy = otol, calibrations = each_calibrations)$phy
ltt_simotol = plot_ltt_phyloall(taxon = "Fringillidae", sim_otol, summ,
add_title = FALSE, file_dir = getwd(), file_name = "_lttplot_simotol_poster.pdf",
ltt_colors = cb_cols1)
loadd(summ)
ltt_simotol = plot_ltt_phyloall(taxon = "Fringillidae", sim_otol, summ,
add_title = FALSE, file_dir = getwd(), file_name = "_lttplot_simotol_poster.pdf",
ltt_colors = cb_cols1)
loadd(cb_cols1)
ltt_simotol = plot_ltt_phyloall(taxon = "Fringillidae", sim_otol, summ,
add_title = FALSE, file_dir = getwd(), file_name = "_lttplot_simotol_poster.pdf",
ltt_colors = cb_cols1)
ltt_simotol = plot_ltt_phyloall(taxon = "Fringillidae", sim_otol, summ,
add_title = FALSE, file_dir = getwd(), file_name = "_lttplot_simotol_poster.pdf",
ltt_colors = cb_cols1, height = 3, width = 7.9)
sapply(sim_otol, function(x) max(ape::branching.times(x)))
max(sapply(sim_otol, function(x) max(ape::branching.times(x)))
)
unlink(".RData")
diagnose(sim_otol)
loadd() # loads all the targets listed in the workflow plan of the previous `make()`
# fig_workflow_cap <- paste("Stylized DateLife workflow. This shows the general worflows
#                           and analyses that can be performed with DateLife, via the R
#                           package or through the website. Details on the functions involved
#                           on each workflow are shown in datelife's R package vignette.")
download.file(url = "https://github.com/phylotastic/datelife/raw/b3532e70b679272093658731d249534e84e15e28/data-raw/benchmark/runtime_tests/2_tests/2_random_spp_names/mdq_plus_gdr_2018.05.29_fill.pdf",
destfile = "fig_runtime1.pdf", mode="wb")
# fig_runtime1_cap <- "Computation time of input processing and search across `DateLife`s
#   chronogram database"
download.file(url = "https://github.com/LunaSare/datelife_examples/raw/master/docs/plots/Fringillidae_LTTplot_phyloall.pdf",
destfile = "fig_schronograms1.pdf", mode="wb")
download.file(url = "https://github.com/LunaSare/datelife_examples/raw/master/docs/plots/Fringillidae_LTTplot_summary_chronograms2.pdf",
destfile = "fig_summaries.pdf", mode="wb")
download.file(url = "https://github.com/LunaSare/datelife_examples/raw/master/docs/plots/Fringillidae_LTTplot_crossval_bladj.pdf",
destfile = "fig_crossval_bladj.pdf", mode="wb")
download.file(url = "https://github.com/LunaSare/datelife_examples/raw/master/docs/plots/Fringillidae_lttplot_crossval_pathd8_summ1.pdf",
destfile = "fig_crossval_boldsumm.pdf", mode="wb")
download.file(url = "https://github.com/LunaSare/datelife_examples/raw/master/docs/plots/Fringillidae_LTTplot_clusters_both.pdf",
destfile = "fig_lttplot_clusters.pdf", mode="wb")
source("frin_plan.R")
r_make(frin_plan)
?r_make
r_make()
make(frin_plan)
dq
loadd() # loads all the targets listed in the workflow plan of the previous `make()`
dq
dr
summ
phyloall
cb_cols1
ltt_plot
datedotol
otol
get_otol_synthetic_tree(input = dq)
otol = get_otol_synthetic_tree(input = dq
)
otol
make(frin_plan)
otol
loadd()
otol
dq
get_otol_synthetic_tree(input = dq)
bestgrove
sdm_matrix
median_matrix
phy_sdm
phy_median
ltt_summ
each_calibrations
sim_otol
otol
otol = get_otol_synthetic_tree(input = dq)
use_each_calibration(phy = otol, calibrations = each_calibrations)$phy
getwd()
rmarkdown::render('bioarxiv_2019.09/report.Rmd')
getwd()
getwd()
knitr::opts_chunk$set(cache=TRUE,
message=FALSE, warning=FALSE,
fig.path='figs/',
cache.path = '_cache/',
fig.process = function(x) {
x2 = sub('-\\d+([.][a-z]+)$', '\\1', x)
if (file.rename(x, x2)) x2 else x
})
source("../frin_plan.R") # stopped using drake for this, it is better to run the analysis directly
loadd() # loads all the targets listed in the workflow plan of the previous `make()`
otol
source("frin_plan.R")
frin_plan <- drake_plan(
strings_in_dots = "literals",
dq = make_datelife_query(input = "fringillidae", get_spp_from_taxon = TRUE),
dr = get_datelife_result(input = dq),
summ = get_taxon_summary(datelife_query = dq, datelife_result = dr),
phyloall = summarize_datelife_result(datelife_query = dq,
datelife_result = dr, summary_format = "phylo_all",
taxon_summary = "none"),
cb_cols1 = c("#0072B2", "#D55E00", "#440154FF", "#CC79A7", "#440154FF", "#009E73",
"#9ad0f3", "#95D840FF", "#F0E442"),
cb_cols2 = c("#440154FF", "#009E73", "#e79f00", "#9ad0f3", "#0072B2", "#D55E00",
"#CC79A7", "#F0E442", "#95D840FF"),
ltt_plot = plot_ltt_phyloall(taxon = "Fringillidae", phy = phyloall, ltt_colors = cb_cols1, tax_datedotol = NULL,
file_name = "ltt_plot_poster.pdf", file_dir = getwd(), height = 3, width = 7.9, add_legend = FALSE, add_title = FALSE),
datedotol = get_dated_otol_induced_subtree(input = dq, ott_ids = dq$ott_ids),
otol = get_otol_synthetic_tree(input = dq),
bestgrove = get_best_grove(datelife_result = dr),
sdm_matrix = get_sdm_matrix(datelife_result = bestgrove$best_grove),
median_matrix = datelife_result_median_matrix(datelife_result = bestgrove$best_grove),
phy_sdm = summary_matrix_to_phylo_all(summ_matrix = sdm_matrix, target_tree = otol),
phy_median = summary_matrix_to_phylo_all(summ_matrix = median_matrix, target_tree = otol),
ltt_summ = plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE),
each_calibrations = get_all_calibrations(phyloall, each = TRUE),
sim_otol = use_each_calibration(phy = otol, calibrations = each_calibrations)$phy,
ltt_simotol = plot_ltt_phyloall(taxon = "Fringillidae", sim_otol, summ,
add_title = FALSE, file_dir = getwd(), file_name = "_lttplot_simotol_poster.pdf",
ltt_colors = cb_cols1, height = 3, width = 7.9)
)
make(frin_plan)
diagnose(sim_otol)
dq
loadd()
otol = get_otol_synthetic_tree(input = dq)
sim_otol = use_each_calibration(phy = otol, calibrations = each_calibrations)$phy
getwd()
setwd("/Users/luna/Desktop/datelife_paper1/biorxiv_2019.09")
setwd("/Users/luna/Desktop/datelife_paper1/biorxiv_2019.09/")
setwd("biorxiv_2019.09/")
setwd("Users/luna/Desktop/datelife_paper1/biorxiv_2019.09/")
setwd("~/Desktop/datelife_paper1/biorxiv_2019.09/")
setwd("~/Desktop/datelife_paper1/bioarxiv_2019.09")
library(datelife)
library(drake)
frin_plan <- drake_plan(
strings_in_dots = "literals",
dq = make_datelife_query(input = "fringillidae", get_spp_from_taxon = TRUE),
dr = get_datelife_result(input = dq),
summ = get_taxon_summary(datelife_query = dq, datelife_result = dr),
phyloall = summarize_datelife_result(datelife_query = dq,
datelife_result = dr, summary_format = "phylo_all",
taxon_summary = "none"),
cb_cols1 = c("#0072B2", "#D55E00", "#440154FF", "#CC79A7", "#440154FF", "#009E73",
"#9ad0f3", "#95D840FF", "#F0E442"),
cb_cols2 = c("#440154FF", "#009E73", "#e79f00", "#9ad0f3", "#0072B2", "#D55E00",
"#CC79A7", "#F0E442", "#95D840FF"),
ltt_plot = plot_ltt_phyloall(taxon = "Fringillidae", phy = phyloall, ltt_colors = cb_cols1, tax_datedotol = NULL,
file_name = "ltt_plot_poster.pdf", file_dir = getwd(), height = 3, width = 7.9, add_legend = FALSE, add_title = FALSE),
datedotol = get_dated_otol_induced_subtree(input = dq, ott_ids = dq$ott_ids),
otol = get_otol_synthetic_tree(input = dq),
bestgrove = get_best_grove(datelife_result = dr),
sdm_matrix = get_sdm_matrix(datelife_result = bestgrove$best_grove),
median_matrix = datelife_result_median_matrix(datelife_result = bestgrove$best_grove),
phy_sdm = summary_matrix_to_phylo_all(summ_matrix = sdm_matrix, target_tree = otol),
phy_median = summary_matrix_to_phylo_all(summ_matrix = median_matrix, target_tree = otol),
ltt_summ = plot_ltt_summary(taxon = "Fringillidae", phy = phyloall, phy_sdm, phy_median,
file_name = "ltt_summ_poster.pdf", file_dir = "~//Desktop//datelife_paper1//", height = 3, width = 7.9,
add_legend = TRUE),
each_calibrations = get_all_calibrations(phyloall, each = TRUE),
sim_otol = use_each_calibration(phy = otol, calibrations = each_calibrations)$phy,
ltt_simotol = plot_ltt_phyloall(taxon = "Fringillidae", sim_otol, summ,
add_title = FALSE, file_dir = getwd(), file_name = "_lttplot_simotol_poster.pdf",
ltt_colors = cb_cols1, height = 3, width = 7.9)
)
make(frin_plan)
setwd("Users/luna/Desktop/datelife_paper1/")
setwd("/Users/luna/Desktop/datelife_paper1/")
# code to generate the paper data and figures:
# source("data.R")
# inactivated now just for testing purposes
# we are using drake to avoid running the examples everytime we change something in the Rmd and knit
# using this for testing instead:
source("../frin_plan.R") # stopped using drake for this, it is better to run the analysis directly
?get_otol_synthetic_tree
getwd()
child?
?
rmarkdown??
?child
??child
??rmarkdown
getwd()
# code to generate the paper data and figures:
# source("data.R")
# inactivated now just for testing purposes
# we are using drake to avoid running the examples everytime we change something in the Rmd and knit
# using this for testing instead:
source("./frin_plan.R") # stopped using drake for this, it is better to run the analysis directly
loadd() # loads all the targets listed in the workflow plan of the previous `make()`
library(datelife)
data(opentree_chronograms)
rpackage_available <- FALSE
availability <- ifelse(rpackage_available, "is available", "is **not** available yet")
rpackage_available <- FALSE
ifelse(rpackage_available, "is available", "is **not** available yet")
getwd()
